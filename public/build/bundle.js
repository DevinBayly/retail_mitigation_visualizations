var app=function(){"use strict";function t(){}function e(t){return t()}function n(){return Object.create(null)}function r(t){t.forEach(e)}function o(t){return"function"==typeof t}function i(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(t,e){t.appendChild(e)}function c(t,e,n){t.insertBefore(e,n||null)}function u(t){t.parentNode.removeChild(t)}function l(t){return document.createElement(t)}function s(t){return document.createTextNode(t)}function f(){return s(" ")}function d(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}let h;function p(t){h=t}const m=[],g=[],v=[],y=[],$=Promise.resolve();let w=!1;function b(t){v.push(t)}let _=!1;const k=new Set;function x(){if(!_){_=!0;do{for(let t=0;t<m.length;t+=1){const e=m[t];p(e),C(e.$$)}for(p(null),m.length=0;g.length;)g.pop()();for(let t=0;t<v.length;t+=1){const e=v[t];k.has(e)||(k.add(e),e())}v.length=0}while(m.length);for(;y.length;)y.pop()();w=!1,_=!1,k.clear()}}function C(t){if(null!==t.fragment){t.update(),r(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(b)}}const A=new Set;function E(t,e){-1===t.$$.dirty[0]&&(m.push(t),w||(w=!0,$.then(x)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function j(i,a,c,l,s,f,d=[-1]){const m=h;p(i);const g=a.props||{},v=i.$$={fragment:null,ctx:null,props:f,update:t,not_equal:s,bound:n(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(m?m.$$.context:[]),callbacks:n(),dirty:d,skip_bound:!1};let y=!1;if(v.ctx=c?c(i,g,((t,e,...n)=>{const r=n.length?n[0]:e;return v.ctx&&s(v.ctx[t],v.ctx[t]=r)&&(!v.skip_bound&&v.bound[t]&&v.bound[t](r),y&&E(i,t)),e})):[],v.update(),y=!0,r(v.before_update),v.fragment=!!l&&l(v.ctx),a.target){if(a.hydrate){const t=function(t){return Array.from(t.childNodes)}(a.target);v.fragment&&v.fragment.l(t),t.forEach(u)}else v.fragment&&v.fragment.c();a.intro&&(($=i.$$.fragment)&&$.i&&(A.delete($),$.i(w))),function(t,n,i){const{fragment:a,on_mount:c,on_destroy:u,after_update:l}=t.$$;a&&a.m(n,i),b((()=>{const n=c.map(e).filter(o);u?u.push(...n):r(n),t.$$.on_mount=[]})),l.forEach(b)}(i,a.target,a.anchor),x()}var $,w;p(m)}class T{$destroy(){!function(t,e){const n=t.$$;null!==n.fragment&&(r(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}var O={value:()=>{}};function S(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new U(r)}function U(t){this._=t}function N(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function P(t,e){for(var n,r=0,o=t.length;r<o;++r)if((n=t[r]).name===e)return n.value}function R(t,e,n){for(var r=0,o=t.length;r<o;++r)if(t[r].name===e){t[r]=O,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}U.prototype=S.prototype={constructor:U,on:function(t,e){var n,r=this._,o=N(t+"",r),i=-1,a=o.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++i<a;)if(n=(t=o[i]).type)r[n]=R(r[n],t.name,e);else if(null==e)for(n in r)r[n]=R(r[n],t.name,null);return this}for(;++i<a;)if((n=(t=o[i]).type)&&(n=P(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new U(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,o=new Array(n),i=0;i<n;++i)o[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=0,n=(r=this._[t]).length;i<n;++i)r[i].value.apply(e,o)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],o=0,i=r.length;o<i;++o)r[o].value.apply(e,n)}};S("start","end","cancel","interrupt");var B={},D={};function M(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function q(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var r in t)r in e||n.push(e[r]=r)})),n}function Z(t,e){var n=t+"",r=n.length;return r<e?new Array(e-r+1).join(0)+n:n}function F(t){var e,n=t.getUTCHours(),r=t.getUTCMinutes(),o=t.getUTCSeconds(),i=t.getUTCMilliseconds();return isNaN(t)?"Invalid Date":((e=t.getUTCFullYear())<0?"-"+Z(-e,6):e>9999?"+"+Z(e,6):Z(e,4))+"-"+Z(t.getUTCMonth()+1,2)+"-"+Z(t.getUTCDate(),2)+(i?"T"+Z(n,2)+":"+Z(r,2)+":"+Z(o,2)+"."+Z(i,3)+"Z":o?"T"+Z(n,2)+":"+Z(r,2)+":"+Z(o,2)+"Z":r||n?"T"+Z(n,2)+":"+Z(r,2)+"Z":"")}var L=function(t){var e=new RegExp('["'+t+"\n\r]"),n=t.charCodeAt(0);function r(t,e){var r,o=[],i=t.length,a=0,c=0,u=i<=0,l=!1;function s(){if(u)return D;if(l)return l=!1,B;var e,r,o=a;if(34===t.charCodeAt(o)){for(;a++<i&&34!==t.charCodeAt(a)||34===t.charCodeAt(++a););return(e=a)>=i?u=!0:10===(r=t.charCodeAt(a++))?l=!0:13===r&&(l=!0,10===t.charCodeAt(a)&&++a),t.slice(o+1,e-1).replace(/""/g,'"')}for(;a<i;){if(10===(r=t.charCodeAt(e=a++)))l=!0;else if(13===r)l=!0,10===t.charCodeAt(a)&&++a;else if(r!==n)continue;return t.slice(o,e)}return u=!0,t.slice(o,i)}for(10===t.charCodeAt(i-1)&&--i,13===t.charCodeAt(i-1)&&--i;(r=s())!==D;){for(var f=[];r!==B&&r!==D;)f.push(r),r=s();e&&null==(f=e(f,c++))||o.push(f)}return o}function o(e,n){return e.map((function(e){return n.map((function(t){return a(e[t])})).join(t)}))}function i(e){return e.map(a).join(t)}function a(t){return null==t?"":t instanceof Date?F(t):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t}return{parse:function(t,e){var n,o,i=r(t,(function(t,r){if(n)return n(t,r-1);o=t,n=e?function(t,e){var n=M(t);return function(r,o){return e(n(r),o,t)}}(t,e):M(t)}));return i.columns=o||[],i},parseRows:r,format:function(e,n){return null==n&&(n=q(e)),[n.map(a).join(t)].concat(o(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=q(t)),o(t,e).join("\n")},formatRows:function(t){return t.map(i).join("\n")},formatRow:i,formatValue:a}}(",").parse;function H(e){let n,r,o,i,h,p,m,g,v;return{c(){n=l("div"),r=l("div"),o=l("label"),i=s(e[0]),h=f(),p=l("div"),m=l("input"),d(m,"type","checkbox"),d(m,"class","svelte-1g2g15k"),d(n,"class","holder svelte-1g2g15k")},m(t,u){var l,s,f,d;c(t,n,u),a(n,r),a(r,o),a(o,i),a(n,h),a(n,p),a(p,m),g||(l=m,s="change",f=e[2],l.addEventListener(s,f,d),v=()=>l.removeEventListener(s,f,d),g=!0)},p(t,[e]){1&e&&function(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}(i,t[0])},i:t,o:t,d(t){t&&u(n),g=!1,v()}}}function I(t,e,n){let{term:r}=e,{callback:o}=e;return t.$$set=t=>{"term"in t&&n(0,r=t.term),"callback"in t&&n(1,o=t.callback)},[r,o,()=>{o(r)}]}class J extends T{constructor(t){super(),j(this,t,I,H,i,{term:0,callback:1})}}let K=(t,e)=>({data:t,id:e,makeSpec(){this.vlSpec={$schema:"https://vega.github.io/schema/vega-lite/v4.json",title:`Keyterm '${this.id}' Plot`,data:{values:this.data},transform:[{filter:"datum.time > datetime('2020')"}],width:"container",mark:"point",encoding:{x:{field:"time",type:"temporal",title:"Date"},y:{field:"name",type:"ordinal",title:"Retailers"},color:{field:"term",type:"nominal"}}}},graph(){vegaEmbed(`#-${this.id.replace(/[\s\d]/g,"-")}`,this.vlSpec)},create(){console.log("data",t),this.div=document.createElement("div"),this.div.id="-"+this.id.replace(/[\s\d]/g,"-"),this.div.style.width="100%",document.querySelector("#charts").append(this.div),this.makeSpec(),this.graph()}});function V(e){let n,r,o;return{c(){n=l("div"),r=f(),o=l("div"),d(n,"id","tickBoxes"),d(n,"class","svelte-25j6ar"),d(o,"id","charts"),d(o,"class","holder svelte-25j6ar")},m(t,e){c(t,n,e),c(t,r,e),c(t,o,e)},p:t,i:t,o:t,d(t){t&&u(n),t&&u(r),t&&u(o)}}}function Y(t,e,n){let{name:r}=e;return(async()=>{let t=await fetch("./complete_data.csv").then((t=>t.text()));t=L(t),t.filter((t=>""==t.term&&""==t.count));let e=e=>{let n=t.filter((t=>t.term==e||""==t.term)).map((t=>(""==t.term?t.name=t.name+"_scrapes":t.name=t.name+"_term_hits",t)));0!=n.length&&K(n,e).create()},n=t.reduce(((t,e)=>(""==e.term||-1==t.indexOf(e.term)&&t.push(e.term),t)),[]).sort();for(let t of n)new J({target:document.querySelector("#tickBoxes"),props:{term:t,callback:e}})})(),t.$$set=t=>{"name"in t&&n(0,r=t.name)},[r]}return new class extends T{constructor(t){super(),j(this,t,Y,V,i,{name:0})}}({target:document.body,props:{name:"world"}})}();
//# sourceMappingURL=bundle.js.map
